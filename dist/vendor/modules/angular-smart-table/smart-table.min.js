!function(a){"use strict";a.module("smart-table",[])}(angular),function(a,b){"use strict";a.module("smart-table").controller("stTableController",["$scope","$parse","$filter","$attrs",function(a,c,d,e){function f(a){return[].concat(a)}function g(){o=f(h(a)),q===!0&&r.pipe()}var h,i,j=e.stTable,k=c(j),l=k.assign,m=d("orderBy"),n=d("filter"),o=f(k(a)),p={sort:{},search:{},pagination:{start:0}},q=!0,r=this;e.stSafeSrc&&(h=c(e.stSafeSrc),a.$watch(function(){var b=h(a);return b?b.length:0},function(a,b){a!==b&&g()}),a.$watch(function(){return h(a)},function(a,b){a!==b&&g()})),this.sortBy=function(a,b){p.sort.predicate=a,p.sort.reverse=b===!0,p.pagination.start=0,this.pipe()},this.search=function(a,b){var c=p.search.predicateObject||{},d=b?b:"$";c[d]=a,a||delete c[d],p.search.predicateObject=c,p.pagination.start=0,this.pipe()},this.pipe=function(){var c=p.pagination,d=p.search.predicateObject?n(o,p.search.predicateObject):o;d=m(d,p.sort.predicate,p.sort.reverse),c.number!==b&&(c.numberOfPages=d.length>0?Math.ceil(d.length/c.number):1,c.start=c.start>=d.length?(c.numberOfPages-1)*c.number:c.start,d=d.slice(c.start,c.start+c.number)),l(a,d)},this.select=function(a,c){var d=o,e=d.indexOf(a);-1!==e&&("single"===c?(a.isSelected=a.isSelected!==!0,i&&(i.isSelected=!1),i=a.isSelected===!0?a:b):d[e].isSelected=!d[e].isSelected)},this.slice=function(a,b){p.pagination.start=a,p.pagination.number=b,this.pipe()},this.tableState=function(){return p},this.setFilterFunction=function(a){n=d(a)},this.setSortFunction=function(a){m=d(a)},this.preventPipeOnWatch=function(){q=!1}}]).directive("stTable",function(){return{restrict:"A",controller:"stTableController",link:function(){}}})}(angular),function(a){"use strict";a.module("smart-table").directive("stSearch",["$timeout",function(a){return{replace:!0,require:"^stTable",scope:{predicate:"=?stSearch"},link:function(b,c,d,e){var f=e,g=null,h=d.stDelay||400;b.$watch("predicate",function(a,b){a!==b&&(e.tableState().search={},f.search(c[0].value||"",a))}),b.$watch(function(){return e.tableState().search},function(a){var d=b.predicate||"$";a.predicateObject&&a.predicateObject[d]!==c[0].value&&(c[0].value=a.predicateObject[d]||"")},!0),c.bind("input",function(c){c=c.originalEvent||c,null!==g&&a.cancel(g),g=a(function(){f.search(c.target.value,b.predicate||""),g=null},h)})}}}])}(angular),function(a){"use strict";a.module("smart-table").directive("stSelectRow",function(){return{restrict:"A",require:"^stTable",scope:{row:"=stSelectRow"},link:function(a,b,c,d){var e=c.stSelectMode||"single";b.bind("click",function(){a.$apply(function(){d.select(a.row,e)})}),a.$watch("row.isSelected",function(a){a===!0?b.addClass("st-selected"):b.removeClass("st-selected")})}}})}(angular),function(a,b){"use strict";a.module("smart-table").directive("stSort",["$parse",function(c){return{restrict:"A",require:"^stTable",link:function(d,e,f,g){function h(){k++,k%3===0?(k=0,g.tableState().sort={},g.tableState().pagination.start=0,g.pipe()):g.sortBy(i,k%2===0)}var i=f.stSort,j=c(i),k=0,l=f.stClassAscent||"st-sort-ascent",m=f.stClassDescent||"st-sort-descent",n=["st-sort-natural",l,m];a.isFunction(j(d))&&(i=j(d)),e.bind("click",function(){i&&d.$apply(h)}),f.stSortDefault!==b&&(k="reverse"===f.stSortDefault?1:0,h()),d.$watch(function(){return g.tableState().sort},function(a){a.predicate!==i?(k=0,e.removeClass(l).removeClass(m)):(k=a.reverse===!0?2:1,e.removeClass(n[(k+1)%2]).addClass(n[k]))},!0)}}}])}(angular),function(a){"use strict";a.module("smart-table").directive("stPagination",function(){return{restrict:"EA",require:"^stTable",scope:{stItemsByPage:"=?",stDisplayedPages:"=?"},template:'<div class="pagination" ng-if="pages.length >= 2"><ul class="pagination"><li ng-repeat="page in pages" ng-class="{active: page==currentPage}"><a ng-click="selectPage(page)">{{page}}</a></li></ul></div>',replace:!0,link:function(a,b,c,d){function e(){var b,c,e=d.tableState().pagination,f=1;for(a.currentPage=Math.floor(e.start/e.number)+1,f=Math.max(f,a.currentPage-Math.abs(Math.floor(a.stDisplayedPages/2))),b=f+a.stDisplayedPages,b>e.numberOfPages&&(b=e.numberOfPages+1,f=Math.max(1,b-a.stDisplayedPages)),a.pages=[],a.numPages=e.numberOfPages,c=f;b>c;c++)a.pages.push(c)}a.stItemsByPage=a.stItemsByPage?+a.stItemsByPage:10,a.stDisplayedPages=a.stDisplayedPages?+a.stDisplayedPages:5,a.currentPage=1,a.pages=[],a.$watch(function(){return d.tableState().pagination},e,!0),a.$watch("stItemsByPage",function(){a.selectPage(1)}),a.$watch("stDisplayedPages",e),a.selectPage=function(b){b>0&&b<=a.numPages&&d.slice((b-1)*a.stItemsByPage,a.stItemsByPage)},d.slice(0,a.stItemsByPage)}}})}(angular),function(a){"use strict";a.module("smart-table").directive("stPipe",function(){return{require:"stTable",scope:{stPipe:"="},link:{pre:function(b,c,d,e){a.isFunction(b.stPipe)&&(e.preventPipeOnWatch(),e.pipe=a.bind(e,b.stPipe,e.tableState()))}}}})}(angular);